palette = "catppuccin_mocha"

add_newline = false

format = """
$hostname\
$shell\
$directory\
$git_branch\
$git_status\
$git_state\
$custom\
$character
"""

right_format = """$all"""

[git_branch]
format = '[$symbol$branch]($style) '
symbol = ''
disabled = true


[directory]
truncate_to_repo = true
truncation_length = 8
truncation_symbol = '‚Ä¶/'

[shell]
disabled = false
style = 'underline bold yellow'
bash_indicator = 'Û±ÜÉ'
nu_indicator = 'Û∞Ö¨'

[terraform]
symbol = 'Û±Å¢ '

[hostname]
format = '[$ssh_symbol$hostname]($style) '

# Disable extensions
[aws]
disabled = true

[azure]
disabled = true

[gcloud]
disabled = true

[nodejs]
disabled = true

[python]
disabled = true

[git_status]
disabled = true
stashed = '^'

[git_commit]
disabled = true

[git_metrics]
disabled = true

# custom module for jj status
[custom.jj]
description = "The current jj status"
when = "jj --ignore-working-copy root"
symbol = "ùì≥ùì≥ "
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color always --limit 1 --template '
  separate(" ",
    change_id.shortest(4),
    bookmarks,
    "|",
    concat(
      if(conflict, "üí•"),
      if(divergent, "üöß"),
      if(hidden, "üëª"),
      if(immutable, "üîí"),
    ),
    raw_escape_sequence("\x1b[1;32m") ++ if(empty, "(empty)"),
    raw_escape_sequence("\x1b[1;32m") ++ coalesce(
      truncate_end(29, description.first_line(), "‚Ä¶"),
      "(no description set)",
    ) ++ raw_escape_sequence("\x1b[0m"),
  )
'
'''

[custom.git_status]
when = "! jj --ignore-working-copy root"
command = "starship module git_status"
style = "" # This disables the default "(bold green)" style
description = "Only show git_status if we're not in a jj repo"


[custom.git_commit]
when = "! jj --ignore-working-copy root"
command = "starship module git_commit"
style = ""
description = "Only show git_commit if we're not in a jj repo"

[custom.git_metrics]
when = "! jj --ignore-working-copy root"
command = "starship module git_metrics"
description = "Only show git_metrics if we're not in a jj repo"
style = ""

[custom.git_branch]
when = "! jj --ignore-working-copy root"
command = "starship module git_branch"
description = "Only show git_branch if we're not in a jj repo"
style = ""

[palettes.catppuccin_mocha]
rosewater = "#f5e0dc"
flamingo = "#f2cdcd"
pink = "#f5c2e7"
mauve = "#cba6f7"
red = "#f38ba8"
maroon = "#eba0ac"
peach = "#fab387"
yellow = "#f9e2af"
green = "#a6e3a1"
teal = "#94e2d5"
sky = "#89dceb"
sapphire = "#74c7ec"
blue = "#89b4fa"
lavender = "#b4befe"
text = "#cdd6f4"
subtext1 = "#bac2de"
subtext0 = "#a6adc8"
overlay2 = "#9399b2"
overlay1 = "#7f849c"
overlay0 = "#6c7086"
surface2 = "#585b70"
surface1 = "#45475a"
surface0 = "#313244"
base = "#1e1e2e"
mantle = "#181825"
crust = "#11111b"
